# 实验报告

## 封面页

- 学校：XXX大学
- 学院：XXX学院
- 实验名称：实验3：配置Web服务器，捕获HTTP报文并分析
- 姓名：XXX
- 学号：XXX
- 专业：XXX
- 指导教师：XXX
- 日期：2025年12月25日

---

## 目录

1. 实验要求  
2. 实验原理  
   2.1 HTTP 协议  
   2.2 TCP 协议  
   2.3 三次握手与四次挥手  
3. 实验环境  
   3.1 Web 服务器  
   3.2 客户端  
4. 实验过程  
   4.1 网页设计  
   4.2 运行 Web 服务器  
   4.3 配置 Wireshark 信息  
   4.4 客户端访问网页  
   4.5 Wireshark 抓包结果分析  
5. 一些思考  
6. 遇到的问题与解决方案  
7. 心得体会  

---

## 1 实验要求

1. 搭建Web服务器（自由选择系统），并制作简单的Web页面，包含简单文本信息（包含专业、学号、姓名）和6幅图像。
2. 通过浏览器获取自己编写的Web页面，使用Wireshark捕获浏览器与Web服务器的交互过程。
3. 分析两个报文的封装层次，包括数据链路层、互连层、传输层、应用层。
4. 对整个HTTP交互过程进行详细说明，使用Wireshark过滤器使其仅显示HTTP协议。
5. 提交HTML文档、Wireshark捕获文件和实验报告。

---

## 2 实验原理

### 2.1 HTTP 协议

- HTTP 特性：请求响应、无状态、可扩展。
- HTTP 请求/响应组成结构：请求行、头、空行、体。
- HTTP/1.0 与 HTTP/1.1 区别。
- HTTP 与 HTTPS 区别。

### 2.2 TCP 协议

- TCP 头部字段：端口、Seq/Ack、窗口、Flags、Options等。

### 2.3 三次握手与四次挥手

- 三次握手过程及示意图。
- 四次挥手过程及示意图。

---

## 3 实验环境

### 3.1 Web 服务器

- 使用 Windows 系统搭建 Web 环境。
- 文件放置位置：`lab3/index.html`。
- 使用 `ipconfig` 查看服务器 IP。

### 3.2 客户端

- 使用 Windows 系统浏览器作为客户端。
- 确认客户端与服务器在同一网络下。

---

## 4 实验过程

### 4.1 网页设计

- HTML 页面包含：
  - 专业、学号、姓名的文本信息。
  - 6 幅图像。
- 示例代码：

```html
<!DOCTYPE html>
<html>
<head>
    <title>实验3</title>
</head>
<body>
    <h1>专业：XXX</h1>
    <h2>学号：XXX</h2>
    <h2>姓名：XXX</h2>
    <img src="image1.jpg" alt="图像1">
    <img src="image2.jpg" alt="图像2">
    <img src="image3.jpg" alt="图像3">
    <img src="image4.jpg" alt="图像4">
    <img src="image5.jpg" alt="图像5">
    <img src="image6.jpg" alt="图像6">
</body>
</html>
```

### 4.2 运行 Web 服务器

- 启动服务器，确保端口配置正确。

### 4.3 配置 Wireshark 信息

- 选择合适的网卡进行抓包。
- 设置过滤条件：`tcp.port == 80`。

### 4.4 客户端访问网页

- 在浏览器中输入服务器 IP 地址，访问网页。
- 使用 Wireshark 抓包。

### 4.5 Wireshark 抓包结果分析

- 分析三次握手：
  - SYN、SYN-ACK、ACK 包的详细信息。
- 分析 HTTP 请求：
  - GET 请求头字段解释。
  - 响应头字段解释。
- 分析四次挥手：
  - FIN_WAIT、CLOSE_WAIT、TIME_WAIT 状态。

---

## 5 一些思考

- 为什么三次握手而不是两次？
- 为什么四次挥手而不是三次？
- 为什么 TIME_WAIT 要等待 2MSL？
- PSH 标志位作用？
- keep-alive 是什么？
- 304 状态码是什么？

---

## 6 遇到的问题与解决方案

- 问题：图片加载缓慢。
  - 解决方案：优化图片大小。
- 问题：浏览器缓存导致 304 Not Modified。
  - 解决方案：清除浏览器缓存。

---

## 7 心得体会

- 本次实验让我深入理解了 HTTP 协议和 TCP 协议的工作原理。
- 通过抓包分析，掌握了 HTTP 报文的封装结构。
- 遇到的问题让我学会了如何调试和优化网络应用。